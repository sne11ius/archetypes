@import helper._
@import models.PaginationInfo
@import views.forms.search.ArchetypeSearch._

@(manifestInfo: ManifestInfo, searchForm: Form[SearchData], archetypes: List[Archetype], paginationInfo: Option[PaginationInfo] = None, searchData: SearchData, itemsTotal: Int)

@main("wasis.nu/mit/archetypes?") {
	<div class="container-fluid">
	  <div class="row">
	    <div class="col-xs-6 col-md-3 well well-small" id="search-form">
	      @form(action = routes.Application.index) {
	        @searchInputField(searchForm("groupId"))
			    @searchInputField(searchForm("artifactId"))
			    @searchInputField(searchForm("description"))
			    <select class="form-control" name="javaVersion">
			      <option @if("" == searchForm("javaVersion").value.getOrElse("")) { selected } value="">[any]</option>
			      <option @if("1.8" == searchForm("javaVersion").value.getOrElse("")) { selected } value="1.8">1.8</option>
			      <option @if("1.7" == searchForm("javaVersion").value.getOrElse("")) { selected } value="1.7">1.7</option>
			      <option @if("1.6" == searchForm("javaVersion").value.getOrElse("")) { selected } value="1.6">1.6</option>
			      <option @if("1.5" == searchForm("javaVersion").value.getOrElse("")) { selected } value="1.5">1.5</option>
			      <option @if("1.4" == searchForm("javaVersion").value.getOrElse("")) { selected } value="1.4">1.4</option>
			      <option @if("1.3" == searchForm("javaVersion").value.getOrElse("")) { selected } value="1.3">1.3</option>
			      <option @if("1.2" == searchForm("javaVersion").value.getOrElse("")) { selected } value="1.2">1.2</option>
			      <option @if("1.1" == searchForm("javaVersion").value.getOrElse("")) { selected } value="1.1">1.1</option>
			      <option @if("[default]" == searchForm("javaVersion").value.getOrElse("")) { selected } value="[default]">[default]</option>
			    </select>
	        <input type="submit" class="btn btn-primary" value="Search">
			  }
	    </div>
	    <div class="col-xs-12 col-md-9">
	      <div class="paginator-top">
	        @if(paginationInfo.isDefined) {
	          @paginator(paginationInfo.get, searchData)
	        }
        </div>
	      <span class="pull-right shadow-z-1">@itemsTotal items</span>
		    <table class="table table-striped table-hover" id="archetypes">
	        <col width="5%" class="details">
	        <col width="20%">
	        <col width="30%">
	        <col width="50%">
	        <col width="5%">
			    <tr>
			      <!-- th>#</th-->
			      <th class="details"></th>
			      <th class="groupId">groupId</th>
			      <th class="artifactId">artifactId</th>
			      <th class="description">description</th>
			      <th class="javaVersion">javaVersion</th>
			    </tr>
			    @for((archetype, index) <- archetypes.zipWithIndex) {
			      <tr data-href="@routes.ArchetypesController.archetypeDetails(archetype.groupId, archetype.artifactId, archetype.version, searchData.groupId, searchData.artifactId, searchData.version, searchData.description, searchData.javaVersion, Some("/pom.xml"))">
			        <!-- td>@{1 + index}</td-->
			        <td class="details"><a href="@routes.ArchetypesController.archetypeDetails(archetype.groupId, archetype.artifactId, archetype.version, searchData.groupId, searchData.artifactId, searchData.version, searchData.description, searchData.javaVersion, Some("/pom.xml"))">details</a></td>
			        <td class="groupId">@archetype.groupId</td>
			        <td class="artifactId">@archetype.artifactId</td>
			        <td class="description">@archetype.description</td>
			        <td class="javaVersion">@archetype.javaVersion</td>
			      </tr>
			    }
			  </table>
			  <h2>Archetypes with additional properties (@{archetypes.filter(a => !a.additionalProps.isEmpty).size} items)</h2>
			  <table>
	        <col width="10%">
	        <col width="30%">
	        <col width="30%">
	        <col width="30%">
	        <tr>
	          <th class="details">details</th>
	          <th class="groupId">groupId</th>
	          <th class="artifactId">artifactId</th>
	          <th class="version">version</th>
	        </tr>
	        @for(archetype <- archetypes.filter(a => !a.additionalProps.isEmpty)) {
	          <tr>
	            <td class="details"><a href="@routes.ArchetypesController.archetypeDetails(archetype.groupId, archetype.artifactId, archetype.version, searchData.groupId, searchData.artifactId, searchData.version, searchData.description, searchData.javaVersion, Some("/pom.xml"))">details</a></td>
	            <td class="groupId">@archetype.groupId</td>
	            <td class="artifactId">@archetype.artifactId</td>
	            <td class="version">@archetype.version</td>
	          </tr>
	        }
	      </table>
	      @if(paginationInfo.isDefined) {
			    @paginator(paginationInfo.get, searchData)
			  }
	    </div>
	  </div>
	</div>
}
